ggplot(aes(x=name)) +
geom_histogram(color="#5e6162", fill="#66a3a3") +
theme_ipsum()
df_mturk_esp %>%
group_by(photoId) %>%
summarise_at(vars(sentimentScore), list(name = mean)) %>%
ggplot(aes(x=name)) +
geom_histogram(color="#5e6162", fill="#66a3a3") +
theme_ipsum()
df_mturk_en = read_csv("../clean_data_mturk/forced_choice_emotion_mturk_long_format_lmer.csv")
df_students$condition <- 'english'
df_mturk_en$condition <- 'english'
df_mturk_esp$condition <- 'espanol'
df = rbind(df_mturk, df_mturk_esp)
df = rbind(df_mturk_en, df_mturk_esp)
df
table(df$emotion)
table(df_mturk_en$emotion)
table(df_mturk_esp$emotion)
table(df$emotion)
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + sexC*ethnicityC*condition + (1 + sexC*ethnicityC*condition|participantId),
data = df_mturk_esp,
control=control)
summary(m2)
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + sexC*ethnicityC*condition + (1 + sexC*ethnicityC*condition|participantId),
data = df_mturk_esp,
control=control)
factor(df$condition)
df$condition â€“ 1.5
df_students$condition <- 'english'
df_mturk_en$condition <- 'english'
df_mturk_esp$condition <- 'espanol'
# Condition centered
df_students$conditionC <- -0.5
df_mturk_en$conditionC <- -0.5
df_mturk_esp$conditionC <- 0.5
df = rbind(df_mturk_en, df_mturk_esp)
table(df$emotion)
table(df$conditionC)
## without derivatives check
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + sexC*ethnicityC*conditionC + (1 + sexC*ethnicityC*conditionC|participantId),
data = df_mturk_esp,
control=control)
summary(m2)
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + sexC*ethnicityC*conditionC + (1 + sexC*ethnicityC*conditionC|participantId),
data = df,
control=control)
summary(m2)
# without derivatives check
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + ethnicityC*conditionC + (1 + ethnicityC*conditionC|participantId),
data = df,
control=control)
summary(m2)
library(lme4)
library(car)
library(lmerTest)
library(tidyverse)
library(ragg)
library(HLMdiag)
library(VCA)
library(hrbrthemes)
library(ggResidpanel)
library(sjPlot)
library(webshot)
library(equatiomatic)
library(svglite)
library(knitr)
df_students = read_csv("../clean_data/free_labeling_emotion_uw_students_long_format_lmer.csv")
df_mturk_en = read_csv("../clean_data_mturk/free_labeling_emotion_mturk_long_format_lmer.csv")
df_mturk_esp = read_csv("../clean_data_mturk_espanol/free_labeling_emotion_mturk_long_format_lmer_espanol.csv")
head(df_mturk_esp)
df_mturk_esp %>%  ggplot(aes(x=sentimentScore)) +
geom_histogram(fill="#1f77b4") +
theme_ipsum()
by.sex <- df_mturk_esp %>%
ggplot( aes(x=sentimentScore, fill=sex)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("#1f77b4", "#ff7f0e")) +
theme_ipsum() +
stat_bin(bins=20) +
labs(fill="")
by.sex
by.age <- df_mturk_esp %>%
ggplot( aes(x=sentimentScore, fill=age)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("#69b3a2", "#404080")) +
theme_ipsum() +
stat_bin(bins=20) +
labs(fill="")
by.age
by.ethnicity <- df_mturk_esp %>%
ggplot( aes(x=sentimentScore, fill=ethnicity)) +
geom_histogram( color="#5e6162", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("#69b3a2", "#404080")) +
theme_ipsum() +
stat_bin(bins=20) +
labs(fill="")
by.ethnicity
df_mturk_esp %>%
group_by(participantId) %>%
summarise_at(vars(sentimentScore), list(name = mean)) %>%
ggplot(aes(x=name)) +
geom_histogram(color="#5e6162", fill="#66a3a3") +
theme_ipsum()
df_mturk_esp %>%
group_by(photoId) %>%
summarise_at(vars(sentimentScore), list(name = mean)) %>%
ggplot(aes(x=name)) +
geom_histogram(color="#5e6162", fill="#66a3a3") +
theme_ipsum()
df_students$condition <- 'english'
df_mturk_en$condition <- 'english'
df_mturk_esp$condition <- 'espanol'
df_students$conditionC <- -0.5
df_mturk_en$conditionC <- -0.5
df_mturk_esp$conditionC <- 0.5
df = rbind(df_mturk_en, df_mturk_esp)
table(df$emotion)
table(df$conditionC)
table(df_mturk_esp$emotion)
table(df$conditionC)
## without derivatives check
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + sexC*ethnicityC*conditionC + (1 + sexC*ethnicityC*conditionC|participantId),
data = df,
control=control)
summary(m2)
## without derivatives check
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m3<-lmer(
sentimentScore ~ 1 + ethnicityC*conditionC + (1 + ethnicityC*conditionC|participantId),
data = df,
control=control)
summary(m3)
install.packages("ordinal")
library(ordinal)
ord_m1 <- clmm2(sentimentScore ~ sexC*ethnicityC*condition, random=participantId, data=df)
ord_m1 <- clmm2(sentimentScore ~ sexC*ethnicityC*conditionC, random=participantId, data=df)
df$sentimentScore
table(df$sentimentScore)
library(lme4)
library(car)
library(lmerTest)
library(tidyverse)
library(ragg)
library(HLMdiag)
library(VCA)
library(hrbrthemes)
library(ggResidpanel)
library(sjPlot)
library(webshot)
library(equatiomatic)
library(svglite)
library(knitr)
library(ordinal)
df_students = read_csv("../clean_data/forced_choice_emotion_uw_students_long_format_lmer.csv")
df_mturk_en = read_csv("../clean_data_mturk/forced_choice_emotion_mturk_long_format_lmer.csv")
df_mturk_esp = read_csv("../clean_data_mturk_espanol/forced_choice_emotion_mturk_long_format_lmer_espanol.csv")
########################
########################
# descriptives
########################
########################
head(df_mturk_esp)
df_mturk_esp %>%  ggplot(aes(x=sentimentScore)) +
geom_histogram(fill="#1f77b4") +
theme_ipsum()
by.sex <- df_mturk_esp %>%
ggplot( aes(x=sentimentScore, fill=sex)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("#1f77b4", "#ff7f0e")) +
theme_ipsum() +
stat_bin(bins=20) +
labs(fill="")
by.sex
by.age <- df_mturk_esp %>%
ggplot( aes(x=sentimentScore, fill=age)) +
geom_histogram( color="#e9ecef", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("#69b3a2", "#404080")) +
theme_ipsum() +
stat_bin(bins=20) +
labs(fill="")
by.age
by.ethnicity <- df_mturk_esp %>%
ggplot( aes(x=sentimentScore, fill=ethnicity)) +
geom_histogram( color="#5e6162", alpha=0.6, position = 'identity') +
scale_fill_manual(values=c("#69b3a2", "#404080")) +
theme_ipsum() +
stat_bin(bins=20) +
labs(fill="")
by.ethnicity
df_mturk_esp %>%
group_by(participantId) %>%
summarise_at(vars(sentimentScore), list(name = mean)) %>%
ggplot(aes(x=name)) +
geom_histogram(color="#5e6162", fill="#66a3a3") +
theme_ipsum()
df_mturk_esp %>%
group_by(photoId) %>%
summarise_at(vars(sentimentScore), list(name = mean)) %>%
ggplot(aes(x=name)) +
geom_histogram(color="#5e6162", fill="#66a3a3") +
theme_ipsum()
#####################################
#####################################
# join dataframes for lmer
#####################################
#####################################
df_students$condition <- 'english'
df_mturk_en$condition <- 'english'
df_mturk_esp$condition <- 'espanol'
# Condition centered
df_students$conditionC <- -0.5
df_mturk_en$conditionC <- -0.5
df_mturk_esp$conditionC <- 0.5
df = rbind(df_mturk_en, df_mturk_esp)
table(df$emotion)
table(df$conditionC)
# without derivatives check
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + sex*ethnicityC*conditionC + (1 + sex*ethnicityC*conditionC|participantId),
data = df,
control=control)
summary(m2)
# without derivatives check
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2<-lmer(
sentimentScore ~ 1 + sexC*ethnicityC*conditionC + (1 + sexC*ethnicityC*conditionC|participantId),
data = df,
control=control)
summary(m2)
factor(df$sentimentScore)
ord_m1 <- clmm2(factor(sentimentScore) ~ sexC*ethnicityC*conditionC, random=participantId, data=df)
table(df$sentimentScore)
df$sentimentScore%>%mutate_if(is.numeric,as.factor)
as.factor(df$sentimentScore)
ord_m1 <- clmm2(factor(sentimentScore) ~ sexC*ethnicityC*conditionC, random=participantId, data=df)
as.factor(df$sentimentScore)
df$sentimentScoreF <- as.factor(df$sentimentScore)
ord_m1 <- clmm2(sentimentScoreF ~ sexC*ethnicityC*conditionC, random=participantId, data=df)
ord_m1 <- clmm2(sentimentScoreF ~ sexC*ethnicityC*conditionC, random=factor(participantId), data=df)
ord_m1
summary(ord_m1)
ord_m1 <- clmm2(
sentimentScoreF ~ sexC*ethnicityC*conditionC,
random=factor(participantId),
data=df,
Hess = TRUE,
nAGQ = 10)
summary(ord_m1)
df$participantIdF <- as.factor(df$participantId)
df$sentimentScoreF <- as.factor(df$sentimentScore)
df$participantIdF <- as.factor(df$participantId)
ord_m1 <- clmm2(
sentimentScoreF ~ sexC*ethnicityC*conditionC,
random=participantIdF,
data=df,
Hess = TRUE,
nAGQ = 10)
control=clmm.control(innerCtrl="noWarn")
ord_m1 <- clmm2(
sentimentScoreF ~ sexC*ethnicityC*conditionC,
random=participantIdF,
data=df,
Hess = TRUE,
nAGQ = 10,
control=control)
control= clmm2.control(innerCtrl="noWarn")
ord_m1 <- clmm2(
sentimentScoreF ~ sexC*ethnicityC*conditionC,
random=participantIdF,
data=df,
Hess = TRUE,
nAGQ = 10,
control=control)
info(df)
dim(df)
dim(df)
df <- na.omit(df)\
df <- na.omit(df)
dim(df)
df$sentimentScoreF
df$sexC
df$ethnicityC
df$conditionC
clear
clear
df %>% mutate_if(is.character, as.factor)
ord_m1 <- clmm2(
sentimentScoreF ~ sexC*ethnicityC*conditionC,
random=participantIdF,
data=df,
Hess = TRUE,
nAGQ = 10,
control=control)
ord_m1 <- clmm2(
sentimentScoreF ~ sexC*ethnicityC*conditionC,
random=participantIdF,
data=df,
Hess = TRUE,
control=control)
summary(ord_m1)
ord_m2 <- clmm2(
sentimentScoreF ~ 1 + sexC*ethnicityC*conditionC + (1 + sexC*ethnicityC*conditionC|participantId),
random=participantIdF,
data=df,
Hess = TRUE,
control=control)
summary(ord_m2)
summary(m2)
summary(ord_m2)
summary(ord_m1)
exp(coef(ord_m2)[5])
table(df$sentimentScoreF)
df.head()
head(df)
str(df)
table(df$sentimentScoreF)
df$emotion
df %>% group_by(emotion)
df %>% group_by(emotion) %>%  df[order(emotion),]
df %>% group_by(emotion) %>%
df[order(emotion),]
df %>% group_by(emotion) %>%
df[order('emotion'),]
df %>% group_by(emotion) %>%
df[with(df, order(emotion)),]
df %>% group_by(emotion) %>%
df[with(df, order(emotion)),]
df$emotion
arrange(df,emotion)
arrange(df,emotion) %>% group_by(emotion)
df %>% group_by(emotion) %>% arrange(emotion)
df %>% group_by(emotion) %>% arrange(emotion)
df %>% group_by(emotion) %>% arrange(df, emotion)
filter(df, emotion == "Other")
filter(df, emotion == "Neutral")
filter(df, emotion == "uncertain")
filter(df, emotion == "Uncertain")
filter(df, emotion == "Surprise")
filter(df, sentimentScore == "-0.296")
filter(df, sentimentScore == "-0.4939")
filter(df, sentimentScore == "0")
filter(df, sentimentScore == "0.2732")
filter(df, sentimentScore == "0.5574")
recode_factor(df$sentimentScoreF,
-0.572  = "anger",
-0.5994 = "disgust",
-0.4939 = "fear",
-0.296 = "uncertain",
0 = "neutral",
0.2732 = "surprise",
0.5574 = "happiness",
.ordered = TRUE)
recode_factor(df$sentimentScoreF,
-0.572  = anger,
-0.5994 = "disgust",
-0.4939 = "fear",
-0.296 = "uncertain",
0 = "neutral",
0.2732 = "surprise",
0.5574 = "happiness",
.ordered = TRUE)
recode_factor(df$sentimentScoreF,
-0.572  = anger,
-0.5994 = disgust,
-0.4939 = fear,
-0.296 = uncertain,
0 = neutral,
0.2732 = surprise,
0.5574 = happiness,
.ordered = TRUE)
recode_factor(df$sentimentScoreF,
-0.572  = anger,
-0.5994 = disgust,
-0.4939 = fear,
-0.296 = uncertain,
0 = neutral,
0.2732 = surprise,
0.5574 = happiness,
ordered = TRUE)
recode_factor(df$sentimentScoreF,
`-0.572`  = "anger",
`-0.5994` = "disgust",
-0.4939 = fear,
-0.296 = uncertain,
0 = neutral,
0.2732 = surprise,
0.5574 = happiness,
ordered = TRUE)
recode_factor(df$sentimentScoreF,
`-0.572`  = "anger",
`-0.5994` = "disgust",
-0.4939 = fear,
-0.296 = uncertain,
0 = neutral,
0.2732 = surprise,
0.5574 = happiness,
ordered = TRUE)
recode_factor(df$sentimentScoreF,
`-0.572`  = "anger",
`-0.5994` = "disgust",
# -0.4939 = fear,
# -0.296 = uncertain,
# 0 = neutral,
# 0.2732 = surprise,
# 0.5574 = happiness,
ordered = TRUE)
recode_factor(df$sentimentScoreF,
-0.572  = "anger",
-0.5994 = "disgust",
# -0.4939 = fear,
# -0.296 = uncertain,
# 0 = neutral,
# 0.2732 = surprise,
# 0.5574 = happiness,
ordered = TRUE)
recode_factor(df$sentimentScore,
-0.572  = "anger",
-0.5994 = "disgust",
# -0.4939 = fear,
# -0.296 = uncertain,
# 0 = neutral,
# 0.2732 = surprise,
# 0.5574 = happiness,
ordered = TRUE)
recode_factor(df$sentimentScoreF,
"-0.572"  = "anger",
"-0.5994" = "disgust",
# -0.4939 = fear,
# -0.296 = uncertain,
# 0 = neutral,
# 0.2732 = surprise,
# 0.5574 = happiness,
ordered = TRUE)
factor_test <- factor(df$emotion,
order = TRUE,
levels =c('anger', 'disgust', 'fear', 'uncertain', 'neutral', 'other', 'surprise', 'happiness'))
factor_test
df$emotion
factor_test <- factor(df$emotion,
order = TRUE,
levels =c('Anger', 'Disgust', 'Fear', 'Uncertain', 'Neutral', 'Other', 'Surprise', 'Happiness'))
factor_test
table(factor_test)
str(factor_test)
str(df$emotion)
tab;e(df$emotion)
table(df$emotion)
table(df$sentimentScore)
filter(df, sentimentScore == "-0.5994")
filter(df, sentimentScore == "-0.5719")
filter(df, sentimentScore == "-0.4939")
filter(df, sentimentScore == "-0.4404")
factor_test <- factor(df$emotion,
order = TRUE,
levels =c('Disgust', 'Anger', 'Fear', 'Sadness', 'Uncertain', 'Neutral', 'Other', 'Surprise', 'Happiness'))
factor_test
df$emotionF <- factor(df$emotion,
order = TRUE,
levels =c('Disgust', 'Anger', 'Fear', 'Sadness', 'Uncertain', 'Neutral', 'Other', 'Surprise', 'Happiness'))
str(df)
control= clmm2.control(innerCtrl="noWarn")
ord_m2 <- clmm2(
emotionF ~ 1 + sexC*ethnicityC*conditionC + (1 + sexC*ethnicityC*conditionC|participantId),
random=participantIdF,
data=df,
Hess = TRUE,
control=control)
summary(ord_m2)
exp(coef(ord_m2)[5])
exp(coef(ord_m2)[1])
(aov <- anova(ord_m2))
ord_m3 <- clmm2(
emotionF ~ 1 + sexC*ethnicityC + (1 + sexC*ethnicityC|participantId),
random=participantIdF,
data=df,
Hess = TRUE,
control=control)
summary(ord_m3)
anova(ord_m2, ord_m3)
summary(m2)
m2.sex <-lmer(
sentimentScore ~ 1 + sexC +  (1+ sexC*ethnicityC|participantId),
data = df,
control=control)
summary(m2.sex)
anova(m2, m2.sex)
m2.sex <-lmer(
sentimentScore ~ 1 + sexC +  (1+ sexC*ethnicityC|participantId),
data = df,
control=control)
control=lmerControl(optimizer ="Nelder_Mead", calc.derivs=FALSE,optCtrl=list(maxfun=2e6), check.nobs.vs.nRE = "ignore")
m2.sex <-lmer(
sentimentScore ~ 1 + sexC +  (1+ sexC*ethnicityC|participantId),
data = df,
control=control)
summary(m2.sex)
anova(m2, m2.sex)
anova(m2, m2.sex)
